# Chapter 1. 자바 8, 9, 10, 11: 무슨 일이 일어나고 있는가?

## 1.1 역사의 흐름은 무엇인가?

자바 역사를 통틀어 가장 큰 변화는 `Java 8`에서 일어났습니다.

예를 들어, 사과 목록을 무게순으로 정렬하는 고전적인 방법은 아래와 같습니다.

```java
class Foo {
    public static void main(String[] args) {
        Collections.sort(inventory, new Comparator<Apply>() {
            public int compare(Apple a1, Apple a2) {
                return a1.getWeight().compareTo(a2.getWeight());
            }
        });
    }
}
```

`Java 8`에서는 아래와 같이 간단하게 구현 할 수 있습니다.

```java
class Foo {
    public static void main(String[] args) {
        inventory.sort(comparing(Apply::getWeight));
    }
}
```

또한, `Java 8` 등장 이전까지 대부분의 자바 프로그램은 코어 중 하나만을 사용했습니다. 나머지 코어를 활용하기 위해서는 `스레드`를 사용하는 방법이 있지만, 관리하기가 어렵고 많은 문제가 발생할 수 있다는
단점이 있습니다.

자바는 이러한 병령 실행 환경을 쉽게 관리하고 에러가 덜 방생하는 방향으로 진화하려고 노력했습니다.

- `Java 1.0`에서는 스레드와 락, 심지어 메모리 모델까지 지원했지만 특별전문가로 구성된 팀이 아닌 이상 사용하기 어려웠습니다.
- `Java 5`에서는 스레드 풀, 병령 실행 컬렉션 등을 강력한 도구를 도입하였고
- `Java 7`에서는 병렬 실행에 도움을 줄 수 있는 포크/조인 프레임워크를 제공했지만, 개발자가 활용하기에는 쉽지 않았습니다.
- `Java 8`에서는 병렬 실행을 새롭고 단순한 방식으로 접근할 수 있는 방법을 제공합니다. 단, 몇 가지 규칙을 지켜야 합니다.
- `Java 9`에서는 리액티브 프로그래밍이라는 병렬 실행 기법을 지원합니다. 이 기법을 사용할 수 있는 상황은 한정되어 있지만, 고성능 병렬 시스템에서 인기를 얻고 있는 `RxJava`를 표준 방식으로
  지원합니다.

`Java 8`은 간결한 코드와 멀티코어 프로세서의 쉬운 활용이라는 두 가지 요구사항을 기반으로 합니다. 새로운 기술은 다음과 같습니다.

- 스트림 API
- 메서드에 코드를 전달하는 기법
- 인터페이스의 디폴트 메서드

데이터베이스 질의 언어에서 고수준 언어로 원하는 동작을 표현하면, 구현에서 최적의 저수준 실행 방법을 선택하는 방식으로 동작합니다. (자바에서는 스트림 라이브러리가 이 역할을 수행)

즉, 스트림을 이용하면 에러를 자주 일으키며 멀티코어 CPU를 이용하는 것 보다 비용이 훨씬 비싼 `synchronized`를 사용하지 않아도 됩니다.
